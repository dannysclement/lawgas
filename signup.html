    // Form Elements
    const signupForm = document.getElementById('signup-form');
    const emailInput = document.getElementById('email');
    const usernameInput = document.getElementById('username');
    const phoneInput = document.getElementById('phone-number');
    const emailError = document.getElementById('email-error');
    const usernameError = document.getElementById('username-error');
    const phoneError = document.getElementById('phone-error');

    // Check Firestore for existing data
    async function checkIfExists(field, value, errorElement) {
      const q = query(collection(db, "users"), where(field, "==", value));
      const querySnapshot = await getDocs(q);

      if (!querySnapshot.empty) {
        errorElement.textContent = `${field} already exists!`;
        return true;
      } else {
        errorElement.textContent = "";
        return false;
      }
    }

    // Real-time validation
    emailInput.addEventListener("input", () => checkIfExists("email", emailInput.value, emailError));
    usernameInput.addEventListener("input", () => checkIfExists("username", usernameInput.value, usernameError));
    phoneInput.addEventListener("input", () => checkIfExists("phone_number", phoneInput.value, phoneError));

    // Form submission
    signupForm.addEventListener("submit", async (e) => {
      e.preventDefault();

      const firstName = document.getElementById("first-name").value;
      const lastName = document.getElementById("last-name").value;
      const nickname = document.getElementById("nickname").value;
      const email = emailInput.value;
      const username = usernameInput.value;
      const phoneNumber = phoneInput.value;

      const emailExists = await checkIfExists("email", email, emailError);
      const usernameExists = await checkIfExists("username", username, usernameError);
      const phoneExists = await checkIfExists("phone_number", phoneNumber, phoneError);

      if (emailExists || usernameExists || phoneExists) return;

      try {
        // Create Firebase Authentication User
        const userCredential = await createUserWithEmailAndPassword(auth, email, "defaultPassword123"); // Replace with secure password handling
        const user = userCredential.user;

        // Add user data to Firestore
        await addDoc(collection(db, "users"), {
          uid: user.uid,
          first_name: firstName,
          last_name: lastName,
          nickname: nickname,
          email,
          username,
          phone_number: phoneNumber,
        });

        // Redirect to account.html
        window.location.href = "account.html";
      } catch (error) {
        console.error("Error signing up:", error.message);
        alert("Failed to sign up: " + error.message);
      }
    });
  </script>
</body>
</html>
